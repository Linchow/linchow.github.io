(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-13e49c55"],{"129f":function(e,t){e.exports=Object.is||function(e,t){return e===t?0!==e||1/e===1/t:e!=e&&t!=t}},1799:function(e,t,a){"use strict";var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-pagination",{attrs:{background:"","current-page":e.page.pageObj.pageNo,"page-sizes":[10,20,50],"page-size":e.page.pageObj.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.page.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})},n=[],o={name:"pagination",data:function(){return{}},props:["page"],methods:{handleSizeChange:function(e){this.page.pageObj.pageSize=e,this.page.pageObj.pageNo=1,this.page.getList()},handleCurrentChange:function(e){this.page.pageObj.pageNo=e,this.page.getList()}}},i=o,l=(a("3b02"),a("2877")),s=Object(l["a"])(i,r,n,!1,null,"17ec4974",null);t["a"]=s.exports},"3b02":function(e,t,a){"use strict";var r=a("79b3"),n=a.n(r);n.a},"6a53":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{},[a("el-form",{ref:"searchForm",attrs:{module:e.searchForm,inline:""}},[a("el-form-item",{attrs:{label:"姓名："}},[a("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.searchForm.userName,callback:function(t){e.$set(e.searchForm,"userName",t)},expression:"searchForm.userName"}})],1),a("el-form-item",{attrs:{label:"手机号："}},[a("el-input",{attrs:{placeholder:"请输入手机号"},model:{value:e.searchForm.phone,callback:function(t){e.$set(e.searchForm,"phone",t)},expression:"searchForm.phone"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary"},on:{click:e.search}},[e._v("查询")])],1),a("el-form-item",[a("el-button",{on:{click:e.reset}},[e._v("重置")])],1)],1),a("div",{staticClass:"opt-box"},[a("el-button",{attrs:{type:"primary",plain:""},on:{click:function(t){return e.addEdit({})}}},[e._v("添加")])],1),a("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}]},[a("el-table",{attrs:{data:e.tableList.list,"header-cell-class-name":"headerCellName",stripe:""}},[a("el-table-column",{attrs:{prop:"loginName",align:"center",label:"账号"}}),a("el-table-column",{attrs:{align:"center",label:"角色"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-tag",{attrs:{type:"success",size:"small"}},[e._v(e._s(t.row.roleName))])]}}])}),a("el-table-column",{attrs:{prop:"userName",align:"center",label:"姓名"}}),a("el-table-column",{attrs:{prop:"phone",align:"center",label:"手机号"}}),a("el-table-column",{attrs:{prop:"email",align:"center",label:"邮箱"}}),a("el-table-column",{attrs:{prop:"createBy",align:"center",label:"添加人"}}),a("el-table-column",{attrs:{align:"center",label:"操作"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",plain:"",circle:""},on:{click:function(a){return e.addEdit(t.row)}}}),a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",circle:"",plain:""},on:{click:function(a){return e.remove(t.row.id)}}})]}}])})],1),a("pagination",{attrs:{page:{getList:e.getList,pageObj:e.pageObj,total:e.tableList.total}}})],1),a("el-dialog",{attrs:{title:(e.formData.id?"编辑":"添加")+"用户",width:"400px",visible:e.dialogVisible},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"ruleForm",attrs:{inline:!1,"label-width":"100px",model:e.formData,rules:e.rules}},[a("el-form-item",{attrs:{label:"账号：",prop:"loginName"}},[a("el-input",{attrs:{disabled:!!e.formData.id,placeholder:"请输入账号"},model:{value:e.formData.loginName,callback:function(t){e.$set(e.formData,"loginName",t)},expression:"formData.loginName"}}),a("div",{staticClass:"tips"},[e._v("提示：建议使用邮箱，一旦创建不可修改。")])],1),a("el-form-item",{attrs:{label:"姓名：",prop:"userName"}},[a("el-input",{attrs:{placeholder:"请输入姓名"},model:{value:e.formData.userName,callback:function(t){e.$set(e.formData,"userName",t)},expression:"formData.userName"}})],1),a("el-form-item",{attrs:{label:"手机号：",prop:"phone"}},[a("el-input",{attrs:{placeholder:"电话号码"},model:{value:e.formData.phone,callback:function(t){e.$set(e.formData,"phone",t)},expression:"formData.phone"}})],1),a("el-form-item",{attrs:{label:"邮箱：",prop:"email"}},[a("el-input",{attrs:{placeholder:"请输入正确的邮箱格式"},model:{value:e.formData.email,callback:function(t){e.$set(e.formData,"email",t)},expression:"formData.email"}})],1),a("el-form-item",{attrs:{label:"角色：",prop:"roleName"}},[a("el-select",{attrs:{placeholder:"角色"},model:{value:e.formData.roleName,callback:function(t){e.$set(e.formData,"roleName",t)},expression:"formData.roleName"}},e._l(e.roleList,(function(e){return a("el-option",{key:e.roleId,attrs:{value:e.roleId,label:e.roleName}})})),1)],1)],1),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.submitForm("ruleForm")}}},[e._v("确 定")])],1)],1)],1)},n=[],o=(a("a4d3"),a("4de4"),a("4160"),a("e439"),a("dbb4"),a("b64b"),a("d3b7"),a("ac1f"),a("841c"),a("159b"),a("2fa7")),i=a("1799");function l(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function s(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?l(a,!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):l(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var c={name:"user",data:function(){var e=function(e,t,a){t?/^[1](([3][0-9])|([4][5-9])|([5][012356789])|([6][56])|([7][0-8])|([8][0-9])|([9][189]))[0-9]{8}$/.test(t)?a():a(new Error("请输入正确的手机号格式")):a(new Error("请输入手机号"))};return{searchForm:{},pageObj:{pageNo:1,pageSize:10},tableList:{},dialogVisible:!1,loading:!1,formData:{},rules:{userName:[{required:!0,message:"请输入姓名",trigger:"blur"}],phone:[{required:!0,validator:e,trigger:"blur"}],email:[{required:!0,type:"email",message:"请输入正确的邮箱格式",trigger:"blur"}],roleName:[{required:!0,message:"请选择角色",trigger:"change"}],loginName:[{required:!0,message:"请输入账号",trigger:"blur"}]},roleList:[]}},components:{Pagination:i["a"]},created:function(){this.search()},methods:{search:function(){this.pageObj.pageNo=1,this.getList()},reset:function(){this.searchForm={}},getList:function(){var e=this;this.searchForm=Object.assign(this.searchForm,this.pageObj),this.loading=!0,this.$http.post("/system/user/list",this.searchForm).then((function(t){1e3===t.code&&(e.tableList=t.data)})).finally((function(){setTimeout((function(){e.loading=!1}),1e3)}))},addEdit:function(e){var t=this;this.dialogVisible=!0,this.$nextTick((function(){t.$refs["ruleForm"].resetFields(),t.formData=s({},e)}))},remove:function(e){var t=this;this.$confirm("确定删除该条数据吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$http.post("/system/user/remove",{id:e}).then((function(e){1e3===e.code&&t.$message({message:"删除成功！",type:"success"}),t.getList()}))}))},submitForm:function(e){var t=this;this.$refs[e].validate((function(e){if(!e)return!1;var a=t.formData.id?"/system/user/edit":"/system/user/create";t.$http.post(a,t.formData).then((function(e){1e3===e.code&&(t.dialogVisible=!1,t.getList())}))}))}}},u=c,p=a("2877"),m=Object(p["a"])(u,r,n,!1,null,"6b7aabec",null);t["default"]=m.exports},"79b3":function(e,t,a){},"841c":function(e,t,a){"use strict";var r=a("d784"),n=a("825a"),o=a("1d80"),i=a("129f"),l=a("14c3");r("search",1,(function(e,t,a){return[function(t){var a=o(this),r=void 0==t?void 0:t[e];return void 0!==r?r.call(t,a):new RegExp(t)[e](String(a))},function(e){var r=a(t,e,this);if(r.done)return r.value;var o=n(e),s=String(this),c=o.lastIndex;i(c,0)||(o.lastIndex=0);var u=l(o,s);return i(o.lastIndex,c)||(o.lastIndex=c),null===u?-1:u.index}]}))}}]);